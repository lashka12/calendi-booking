@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===== THEME DEFINITIONS ===== */
:root {
  /* Default: Sage (earthy green) */
  --accent-50: 244 247 244;
  --accent-100: 227 235 227;
  --accent-200: 200 216 200;
  --accent-300: 161 188 161;
  --accent-400: 118 154 118;
  --accent-500: 86 125 86;
  --accent-600: 67 100 67;
  --accent-700: 55 80 55;
  --accent-800: 46 65 46;
  --accent-900: 39 54 39;
  
  --bg-main: 247 247 246;
  --bg-card: 255 255 255;
  --text-primary: 49 49 47;
  --text-secondary: 107 107 100;
  
  --btn-bg: 67 100 67;
  --btn-bg-hover: 55 80 55;
}

/* Theme: Graphite (professional grey) */
[data-theme="graphite"] {
  --accent-50: 244 244 245;
  --accent-100: 228 228 231;
  --accent-200: 212 212 216;
  --accent-300: 161 161 170;
  --accent-400: 113 113 122;
  --accent-500: 82 82 91;
  --accent-600: 63 63 70;
  --accent-700: 39 39 42;
  --accent-800: 24 24 27;
  --accent-900: 9 9 11;
  
  --bg-main: 244 244 245;
  --bg-card: 255 255 255;
  --text-primary: 24 24 27;
  --text-secondary: 82 82 91;
  
  --btn-bg: 39 39 42;
  --btn-bg-hover: 24 24 27;
}

/* Theme: Ocean (deep blue/teal) */
[data-theme="ocean"] {
  --accent-50: 239 246 255;
  --accent-100: 219 234 254;
  --accent-200: 191 219 254;
  --accent-300: 147 197 253;
  --accent-400: 96 165 250;
  --accent-500: 59 130 246;
  --accent-600: 37 99 235;
  --accent-700: 29 78 216;
  --accent-800: 30 64 175;
  --accent-900: 30 58 138;
  
  --bg-main: 248 250 252;
  --bg-card: 255 255 255;
  --text-primary: 15 23 42;
  --text-secondary: 71 85 105;
  
  --btn-bg: 37 99 235;
  --btn-bg-hover: 29 78 216;
}

/* Theme: Rose (warm pink/coral) */
[data-theme="rose"] {
  --accent-50: 255 241 242;
  --accent-100: 255 228 230;
  --accent-200: 254 205 211;
  --accent-300: 253 164 175;
  --accent-400: 251 113 133;
  --accent-500: 244 63 94;
  --accent-600: 225 29 72;
  --accent-700: 190 18 60;
  --accent-800: 159 18 57;
  --accent-900: 136 19 55;
  
  --bg-main: 255 251 251;
  --bg-card: 255 255 255;
  --text-primary: 67 20 35;
  --text-secondary: 120 53 73;
  
  --btn-bg: 225 29 72;
  --btn-bg-hover: 190 18 60;
}

/* Theme: Midnight (dark indigo/purple) */
[data-theme="midnight"] {
  --accent-50: 238 242 255;
  --accent-100: 224 231 255;
  --accent-200: 199 210 254;
  --accent-300: 165 180 252;
  --accent-400: 129 140 248;
  --accent-500: 99 102 241;
  --accent-600: 79 70 229;
  --accent-700: 67 56 202;
  --accent-800: 55 48 163;
  --accent-900: 49 46 129;
  
  --bg-main: 248 248 252;
  --bg-card: 255 255 255;
  --text-primary: 30 27 75;
  --text-secondary: 79 70 129;
  
  --btn-bg: 79 70 229;
  --btn-bg-hover: 67 56 202;
}

/* Theme: Ember (warm orange/terracotta) */
[data-theme="ember"] {
  --accent-50: 255 247 237;
  --accent-100: 255 237 213;
  --accent-200: 254 215 170;
  --accent-300: 253 186 116;
  --accent-400: 251 146 60;
  --accent-500: 249 115 22;
  --accent-600: 234 88 12;
  --accent-700: 194 65 12;
  --accent-800: 154 52 18;
  --accent-900: 124 45 18;
  
  --bg-main: 255 252 249;
  --bg-card: 255 255 255;
  --text-primary: 67 32 7;
  --text-secondary: 120 70 35;
  
  --btn-bg: 234 88 12;
  --btn-bg-hover: 194 65 12;
}

/* Theme: Slate (elegant grey/neutral) */
[data-theme="slate"] {
  --accent-50: 248 250 252;
  --accent-100: 241 245 249;
  --accent-200: 226 232 240;
  --accent-300: 203 213 225;
  --accent-400: 148 163 184;
  --accent-500: 100 116 139;
  --accent-600: 71 85 105;
  --accent-700: 51 65 85;
  --accent-800: 30 41 59;
  --accent-900: 15 23 42;
  
  --bg-main: 248 250 252;
  --bg-card: 255 255 255;
  --text-primary: 15 23 42;
  --text-secondary: 100 116 139;
  
  --btn-bg: 51 65 85;
  --btn-bg-hover: 30 41 59;
}

/* Sage is now the default theme in :root */

/* Theme: Dark (sleek neutral dark mode - like iOS) */
[data-theme="dark"] {
  --accent-50: 28 28 30;
  --accent-100: 44 44 46;
  --accent-200: 58 58 60;
  --accent-300: 72 72 74;
  --accent-400: 99 99 102;
  --accent-500: 142 142 147;
  --accent-600: 174 174 178;
  --accent-700: 199 199 204;
  --accent-800: 229 229 234;
  --accent-900: 242 242 247;
  
  --bg-main: 0 0 0;
  --bg-card: 28 28 30;
  --text-primary: 255 255 255;
  --text-secondary: 142 142 147;
  
  --btn-bg: 58 58 60;
  --btn-bg-hover: 72 72 74;
  --btn-text: 255 255 255;
}

/* Theme: Teal (cyan/turquoise) */
[data-theme="teal"] {
  --accent-50: 240 253 250;
  --accent-100: 204 251 241;
  --accent-200: 153 246 228;
  --accent-300: 94 234 212;
  --accent-400: 45 212 191;
  --accent-500: 20 184 166;
  --accent-600: 13 148 136;
  --accent-700: 15 118 110;
  --accent-800: 17 94 89;
  --accent-900: 19 78 74;
  
  --bg-main: 247 254 252;
  --bg-card: 255 255 255;
  --text-primary: 19 78 74;
  --text-secondary: 15 118 110;
  
  --btn-bg: 13 148 136;
  --btn-bg-hover: 15 118 110;
}

/* Theme: Wine (deep burgundy) */
[data-theme="wine"] {
  --accent-50: 253 242 248;
  --accent-100: 252 231 243;
  --accent-200: 251 207 232;
  --accent-300: 249 168 212;
  --accent-400: 244 114 182;
  --accent-500: 190 24 93;
  --accent-600: 157 23 77;
  --accent-700: 131 24 67;
  --accent-800: 112 26 61;
  --accent-900: 80 20 45;
  
  --bg-main: 253 249 251;
  --bg-card: 255 255 255;
  --text-primary: 80 20 45;
  --text-secondary: 131 24 67;
  
  --btn-bg: 157 23 77;
  --btn-bg-hover: 131 24 67;
}

/* Theme: Forest (deep green) */
[data-theme="forest"] {
  --accent-50: 236 253 245;
  --accent-100: 209 250 229;
  --accent-200: 167 243 208;
  --accent-300: 110 231 183;
  --accent-400: 52 211 153;
  --accent-500: 16 185 129;
  --accent-600: 5 150 105;
  --accent-700: 4 120 87;
  --accent-800: 6 95 70;
  --accent-900: 4 78 58;
  
  --bg-main: 247 254 250;
  --bg-card: 255 255 255;
  --text-primary: 4 78 58;
  --text-secondary: 4 120 87;
  
  --btn-bg: 5 150 105;
  --btn-bg-hover: 4 120 87;
}

/* Theme: Copper (warm brown/bronze) */
[data-theme="copper"] {
  --accent-50: 254 247 239;
  --accent-100: 253 238 221;
  --accent-200: 251 218 185;
  --accent-300: 248 192 139;
  --accent-400: 243 156 83;
  --accent-500: 180 83 9;
  --accent-600: 146 64 14;
  --accent-700: 120 53 15;
  --accent-800: 97 45 18;
  --accent-900: 69 35 17;
  
  --bg-main: 254 252 249;
  --bg-card: 255 255 255;
  --text-primary: 69 35 17;
  --text-secondary: 120 53 15;
  
  --btn-bg: 146 64 14;
  --btn-bg-hover: 120 53 15;
}

/* Theme: Violet (purple) */
[data-theme="violet"] {
  --accent-50: 250 245 255;
  --accent-100: 243 232 255;
  --accent-200: 233 213 255;
  --accent-300: 216 180 254;
  --accent-400: 192 132 252;
  --accent-500: 168 85 247;
  --accent-600: 147 51 234;
  --accent-700: 126 34 206;
  --accent-800: 107 33 168;
  --accent-900: 88 28 135;
  
  --bg-main: 252 250 255;
  --bg-card: 255 255 255;
  --text-primary: 88 28 135;
  --text-secondary: 126 34 206;
  
  --btn-bg: 147 51 234;
  --btn-bg-hover: 126 34 206;
}

/* ===== DARK THEMES ===== */

/* Theme: Dark Ocean (subtle blue dark mode) */
[data-theme="dark-ocean"] {
  --accent-50: 17 24 39;
  --accent-100: 30 41 59;
  --accent-200: 51 65 85;
  --accent-300: 71 85 105;
  --accent-400: 100 116 139;
  --accent-500: 148 163 184;
  --accent-600: 176 190 206;
  --accent-700: 203 213 225;
  --accent-800: 226 232 240;
  --accent-900: 241 245 249;
  
  --bg-main: 10 15 25;
  --bg-card: 20 28 42;
  --text-primary: 226 232 240;
  --text-secondary: 148 163 184;
  
  --btn-bg: 51 85 120;
  --btn-bg-hover: 65 100 140;
  --btn-text: 226 232 240;
}

/* Theme: Dark Emerald (subtle green dark mode) */
[data-theme="dark-forest"] {
  --accent-50: 17 28 24;
  --accent-100: 28 42 36;
  --accent-200: 42 58 52;
  --accent-300: 60 80 72;
  --accent-400: 85 110 98;
  --accent-500: 120 145 135;
  --accent-600: 156 176 168;
  --accent-700: 190 205 198;
  --accent-800: 218 228 224;
  --accent-900: 240 245 243;
  
  --bg-main: 12 18 16;
  --bg-card: 22 32 28;
  --text-primary: 218 228 224;
  --text-secondary: 120 145 135;
  
  --btn-bg: 50 85 70;
  --btn-bg-hover: 65 100 85;
  --btn-text: 218 228 224;
}

/* Theme: Dark Warm (subtle warm/sepia dark mode) */
[data-theme="dark-rose"] {
  --accent-50: 28 24 22;
  --accent-100: 42 36 32;
  --accent-200: 58 50 45;
  --accent-300: 78 68 62;
  --accent-400: 105 92 85;
  --accent-500: 140 125 118;
  --accent-600: 172 158 150;
  --accent-700: 200 188 182;
  --accent-800: 225 218 214;
  --accent-900: 245 242 240;
  
  --bg-main: 18 15 14;
  --bg-card: 32 28 26;
  --text-primary: 225 218 214;
  --text-secondary: 140 125 118;
  
  --btn-bg: 95 75 65;
  --btn-bg-hover: 110 90 78;
  --btn-text: 225 218 214;
}

@layer base {
  html {
    -webkit-tap-highlight-color: transparent;
  }
  
  body {
    background-color: rgb(var(--bg-main));
  }

  input, select, textarea {
    font-size: 16px !important;
  }

  ::selection {
    background-color: rgb(var(--accent-200));
    color: rgb(var(--accent-900));
  }
}

@layer components {
  /* Primary Action Button - Uses theme accent with dark mode support */
  .btn-primary {
    @apply relative w-full h-[48px] sm:h-[52px] text-[14px] sm:text-[15px] font-semibold rounded-[12px] sm:rounded-[14px]
           flex items-center justify-center gap-2 overflow-hidden
           transition-all duration-150 ease-out
           active:scale-[0.98]
           disabled:opacity-40 disabled:pointer-events-none;
    background-color: rgb(var(--btn-bg, var(--accent-600)));
    color: rgb(var(--btn-text, 255 255 255));
  }

  .btn-primary:hover {
    background-color: rgb(var(--btn-bg-hover, var(--accent-700)));
  }

  .btn-primary::after {
    content: '';
    @apply absolute inset-0 bg-white/10 opacity-0 transition-opacity duration-150;
  }

  .btn-primary:active::after {
    @apply opacity-100;
  }

  /* Secondary Button */
  .btn-secondary {
    @apply h-10 sm:h-11 px-4 sm:px-5 text-[13px] sm:text-sm font-medium rounded-lg sm:rounded-xl
           border shadow-card
           transition-all duration-150
           active:scale-[0.98]
           inline-flex items-center justify-center;
    background-color: rgb(var(--bg-card));
    color: rgb(var(--text-primary));
    border-color: rgb(var(--accent-200));
  }
  
  .btn-secondary:active {
    background-color: rgb(var(--accent-50));
  }

  /* Input Field */
  .input {
    @apply w-full h-[48px] sm:h-[52px] px-3.5 sm:px-4 text-[14px] sm:text-[15px] rounded-[12px] sm:rounded-[14px]
           border
           transition-all duration-150
           focus:outline-none focus:ring-2;
    background-color: rgb(var(--bg-card));
    color: rgb(var(--text-primary));
    border-color: rgb(var(--accent-200) / 0.5);
  }
  
  .input:focus {
    border-color: rgb(var(--accent-400));
    --tw-ring-color: rgb(var(--accent-100));
  }
  
  .input::placeholder {
    color: rgb(var(--text-secondary) / 0.6);
  }

  .input-label {
    @apply block text-[12px] sm:text-[13px] font-medium mb-1.5 sm:mb-2 ml-1;
    color: rgb(var(--text-secondary));
  }

  /* Card */
  .card {
    @apply rounded-[16px] sm:rounded-[20px] shadow-card border;
    background-color: rgb(var(--bg-card));
    border-color: rgb(var(--accent-100) / 0.5);
  }

  /* Skeleton with shimmer effect */
  .skeleton {
    @apply rounded-[12px] sm:rounded-[14px] relative overflow-hidden;
    background-color: rgb(var(--accent-100));
  }
  
  .skeleton::after {
    content: '';
    position: absolute;
    inset: 0;
    transform: translateX(-100%);
    background: linear-gradient(
      90deg,
      transparent,
      rgb(var(--accent-50) / 0.6),
      transparent
    );
    animation: shimmer 1.5s infinite;
  }
  
  @keyframes shimmer {
    100% {
      transform: translateX(100%);
    }
  }
  
  /* Entrance animations */
  @keyframes cardEntrance {
    from {
      opacity: 0;
      transform: scale(0.96);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }
  
  .animate-cardEntrance {
    animation: cardEntrance 0.3s ease-out both;
  }
  
  @keyframes slotEntrance {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }
  
  .animate-slotEntrance {
    animation: slotEntrance 0.2s ease-out both;
  }
  
  /* Theme-aware accent backgrounds */
  .bg-accent-light {
    background-color: rgb(var(--accent-50));
  }
  
  .bg-accent-medium {
    background-color: rgb(var(--accent-100));
  }
  
  .bg-accent-solid {
    background-color: rgb(var(--accent-500));
  }
  
  .text-accent {
    color: rgb(var(--accent-600));
  }
  
  .text-accent-dark {
    color: rgb(var(--accent-700));
  }
  
  .border-accent {
    border-color: rgb(var(--accent-200));
  }
  
  /* Icon container with accent */
  .icon-badge {
    @apply w-12 h-12 sm:w-14 sm:h-14 rounded-2xl flex items-center justify-center;
    background-color: rgb(var(--accent-100));
  }
  
  .icon-badge svg {
    color: rgb(var(--accent-600));
  }
  
  /* Info block */
  .info-block {
    @apply rounded-xl p-3 sm:p-3.5;
    background-color: rgb(var(--accent-50));
  }
  
  .info-block-label {
    @apply text-[10px] sm:text-[11px] font-medium uppercase tracking-wider mb-1;
    color: rgb(var(--accent-500));
  }
  
  .info-block-value {
    @apply text-[14px] sm:text-[15px] font-semibold;
    color: rgb(var(--text-primary));
  }
}

@layer utilities {
  .safe-bottom {
    padding-bottom: max(16px, env(safe-area-inset-bottom));
  }
  
  .bg-main {
    background-color: rgb(var(--bg-main));
  }
  
  .text-primary {
    color: rgb(var(--text-primary));
  }
  
  .text-secondary {
    color: rgb(var(--text-secondary));
  }

  /* Success Animation Keyframes */
  @keyframes bounce-in {
    0% {
      opacity: 0;
      transform: scale(0.3);
    }
    50% {
      opacity: 1;
      transform: scale(1.1);
    }
    70% {
      transform: scale(0.9);
    }
    100% {
      transform: scale(1);
    }
  }

  @keyframes draw-check {
    0% {
      stroke-dashoffset: 100;
    }
    100% {
      stroke-dashoffset: 0;
    }
  }

  @keyframes sparkle {
    0%, 100% {
      opacity: 0;
      transform: scale(0) rotate(0deg);
    }
    50% {
      opacity: 1;
      transform: scale(1) rotate(180deg);
    }
  }

  @keyframes confetti-fall {
    0% {
      opacity: 1;
      transform: translateY(0) rotate(0deg);
    }
    100% {
      opacity: 0;
      transform: translateY(100px) rotate(720deg);
    }
  }

  @keyframes float-up {
    0% {
      opacity: 0;
      transform: translateY(20px);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes pulse-ring {
    0% {
      transform: scale(1);
      opacity: 0.4;
    }
    100% {
      transform: scale(2);
      opacity: 0;
    }
  }

  @keyframes celebrate-bounce {
    0%, 100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-10px);
    }
  }

  .animate-bounce-in {
    animation: bounce-in 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
  }

  .animate-draw-check {
    stroke-dasharray: 100;
    stroke-dashoffset: 100;
    animation: draw-check 0.5s ease-out 0.3s forwards;
  }

  .animate-sparkle {
    animation: sparkle 1.5s ease-in-out infinite;
  }

  .animate-confetti {
    animation: confetti-fall 1.5s ease-out forwards;
  }

  .animate-float-up {
    animation: float-up 0.5s ease-out forwards;
  }

  .animate-pulse-ring {
    animation: pulse-ring 1.5s ease-out infinite;
  }

  .animate-celebrate {
    animation: celebrate-bounce 1s ease-in-out infinite;
  }

  /* Shake animation for errors */
  @keyframes shake {
    0%, 100% { transform: translateX(0); }
    10%, 30%, 50%, 70%, 90% { transform: translateX(-4px); }
    20%, 40%, 60%, 80% { transform: translateX(4px); }
  }

  .animate-shake {
    animation: shake 0.5s ease-in-out;
  }
}
